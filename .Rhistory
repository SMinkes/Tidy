sul_v = numeric(0)
for(i in (sum(complete.cases(read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))))) > 100) {
paste(sprintf("%03d", i), ".csv", sep="")
}
sul_v = numeric(0)
for(i in (sum(complete.cases(read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))))) > 100) {
x <- paste(sprintf("%03d", i), ".csv", sep="")
}
x
sul_v <- for(i in (sum(complete.cases(read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))))) > 100) {
x <- paste(sprintf("%03d", i), ".csv", sep="")
}
sul_v
data
complete("specdata", c(2, 4, 8, 10, 12))
sul_v <- complete("specdata", c(2, 4, 8, 10, 12))
sul_v
View(sul_v)
?all.files
?list.files
selection <- complete(directory, id)
id <- 70:72
selection <- complete(directory, id)
selection
for(selection$nobs > 100) {
}
selection <- complete(directory, id)
for(selection[nobs] > 100) {
}
for(selection[nobs] > 150) {
selection
}
selection[nobs]
selection$nobs
for(selection[[nobs]] > 150) {
selection
}
selection[1,]
selection[2,]
selection[,2]
for(i in id) {
if(selection[,2] > 150) {}
selection
}
}
selection[[,2]]
selection[,2]
selection[,c(2)]
names(selcetion)
names(selection)
?subset
subset(selection, nobs > 150)
threshold <- 150
subset(selection, nobs > threshold)
threshold <- 0
subset(selection, nobs > threshold)
selection <- subset(complete(directory, id), nobs > threshold)
selection
?corr
?cor
data <- NA
for(i in selection) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
}
data <- NA
for(i in id) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
}
data
threshold <- 200
selection <- subset(complete(directory, id), nobs > threshold)
data <- NA
for(i in id) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
}
data
View(data)
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
for(i in id) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr(data, na.rm = TRUE)
}
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
for(i in id) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data, na.rm = TRUE)
}
data
id
selection
for(i in selection) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data, na.rm = TRUE)
}
for(i in selection[i]) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data, na.rm = TRUE)
}
names(selection)
for(i in selection[[i]]) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data, na.rm = TRUE)
}
for(i in selection$i) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data, na.rm = TRUE)
}
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
data
selection
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
for(i in selection) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data, na.rm = TRUE)
}
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
for(selection$i in id) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data, na.rm = TRUE)
}
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
for(selection[i] in id) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data, na.rm = TRUE)
}
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
for(selection in id) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data, na.rm = TRUE)
}
set.seed(42)
dflist <- vector( "list", 5 )
for( i in 1:5 ){
dflist[[i]] <- data.frame( A = rnorm(100), B = rnorm(100), C = rnorm(100) )
}
varlist <- c("A", "B")
lapply( dflist, function(x){ colMeans(x[varlist]) } )
?colMeans
?colcor
??colcor
?cor
read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
i
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
complete <- function(directory, id = 1:332) {
x = numeric(0)
nobs = numeric(0)
for(i in id) {
nobs <- sum(complete.cases(read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))))
x <- rbind(x, data.frame(i, nobs))
}
x
}
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
id <- 1:3
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
threshold <- 150
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
directpry <- "specdata"
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
directory <- "specdata"
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
read.csv(file.path(directory, paste(sprintf("%03d", id), ".csv", sep="")))
read.csv(file.path(directory, paste(sprintf("%03d", 2), ".csv", sep="")))
avector <- as.vector(aframe['a2'])
class(avector)
avector <- aframe[['a2']]
class(avector)
avector <- aframe[,2]
class(avector)
?as.vector
?aframe
a1 = c(1, 2, 3, 4, 5)
a2 = c(6, 7, 8, 9, 10)
a3 = c(11, 12, 13, 14, 15)
aframe = data.frame(a1, a2, a3)
avector <- as.vector(aframe['a2'])
class(avector)
avector <- aframe[['a2']]
class(avector)
avector <- aframe[,2]
class(avector)
selection <- subset(complete(directory, id), nobs > threshold)
avector <- selection[,1]
avector
avector <- subset(complete(directory, id), nobs > threshold)[,1]
avector
for(i in avector) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
}
data
selection <- subset(complete(directory, id), nobs > threshold)
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data <- NA
for(i in avector) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data, na.rm = TRUE)
}
selection <- subset(complete(directory, id), nobs > threshold)
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data <- NA
for(i in avector) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data)
}
?cor
data
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data <- NA
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data)
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data)
}
set.seed(10)
x = as.data.frame(matrix(rnorm(100), ncol = 10))
x$L1 = letters[1:10]
x$L2 = letters[11:20]
cor(x)
set.seed(10)
x = as.data.frame(matrix(rnorm(100), ncol = 10))
x$L1 = letters[1:10]
x$L2 = letters[11:20]
cor(x[sapply(x, is.numeric)])
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data[sapply(data, is.numeric)])
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cor(sul, nit)
}
corr
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cor(sul, nit, na.rm=TRUE)
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cor(sul, nit, use="complete.obs")
}
corr
avector
threshold <- 300
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cor(sul, nit, use="complete.obs")
}
corr
avector
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- rbind(corr, cor(sul, nit, use="complete.obs"))
}
corr
threshold <-150
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- rbind(corr, cor(sul, nit, use="complete.obs"))
}
corr
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cbind(corr, cor(sul, nit, use="complete.obs"))
}
corr
corr
complete <- function(directory, id = 1:332) {
x = numeric(0)
nobs = numeric(0)
for(i in id) {
nobs <- sum(complete.cases(read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))))
x <- rbind(x, data.frame(i, nobs))
}
x
}
source("corr.R")
source("complete.R")
cr <- corr("specdata", 150)
head(cr)
corr <- function(directory, threshold = 0) {
avector <- subset(complete(directory, 1:332), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
correlation <- cbind(correlation, cor(sul, nit, use="complete.obs"))
}
correlation
}
cr <- corr("specdata", 150)
head(cr)
corr <- function(directory, threshold = 0) {
avector <- subset(complete(directory, 1:332), nobs > threshold)[,1]
correlation = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
correlation <- cbind(correlation, cor(sul, nit, use="complete.obs"))
}
correlation
}
cr <- corr("specdata", 150)
head(cr)
?head
head(6)
headcr
head(cr)
summary(cr)
cr <- corr("specdata", 400)
head(cr)
GDPurl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
GDP <- data.table(read.csv("GDP.csv", skip=4, nrows=215))
setnames(dtGDP, c("X", "X.1", "X.3", "X.4"), c("CountryCode", "rankingGDP", "Long.Name", "gdp"))
Eduurl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv"
Edu <- data.table <-(read.csv(Eduurl))
install.packages("data.table")
library(data.table)
## install packages
install.packages("sqldf")
library(sqldf)
install.packages("plyr")
library(plyr)
install.packages("dplyr")
library(dplyr)
## set directory for the column names, read the column names and activity names.
name_dir <- ""
names <- read.csv(paste(getwd(), name_dir, "features.txt", sep=""), sep="", header=FALSE, col.names=c("Id", "Measurement"))
Act <- read.csv(paste(getwd(), name_dir, "activity_labels.txt", sep=""), sep="", header=FALSE, col.names=c("Id", "Activity"))
## set the directory for the test data, read in the test data, subject test data and activity test data.
## combine the columns for the test data set.
test_dir <- "/test/"
X_test <- read.csv(paste(getwd(), test_dir, "X_test.txt", sep=""), sep="", header=FALSE, col.names=names$Measurement)
subject_test <- read.csv(paste(getwd(), test_dir, "subject_test.txt", sep=""), sep="", header=FALSE, col.names="Subject")
Y_test <- read.csv(paste(getwd(), test_dir, "y_test.txt", sep=""), sep="", header=FALSE, col.names="Activity")
test_data <- cbind(subject_test, Y_test, X_test)
## set the directory for the train data, read in the train data, subject train data and activity train data.
## combine the columns for the train data set
train_dir <- "/train/"
X_train <- read.csv(paste(getwd(), train_dir, "X_train.txt", sep=""), sep="", header=FALSE, col.names=names$Measurement)
subject_train <- read.csv(paste(getwd(), train_dir, "subject_train.txt", sep=""), sep="", header=FALSE, col.names="Subject")
Y_train <- read.csv(paste(getwd(), train_dir, "y_train.txt", sep=""), sep="", header=FALSE, col.names="Activity")
train_data <- cbind(subject_train, Y_train, X_train)
#combine the test and trainings data set
data <- rbind(test_data, train_data)
## replace the activity number to a descriptive word
data_activity <- sqldf("SELECT Act.Activity as Activity FROM data INNER JOIN Act ON data.Activity= Act.Id")
## select the columns with the keyword mean and with the keyword std
data_mean <- select(data, contains("mean", ignore.case=TRUE))
data_std <- select(data, contains("std", ignore.case=TRUE))
## combine the columns and rename the subject column
new <- cbind(data$Subject, data_activity, data_mean, data_std)
new <- rename(new, replace=c("data$Subject" = "Subject"))
## create the tidy data set
tidy <- ddply(new, .(Subject, Activity), numcolwise(mean))
setwd("Lesson3/UCI HAR Dataset")
## install packages
install.packages("sqldf")
library(sqldf)
install.packages("plyr")
library(plyr)
install.packages("dplyr")
library(dplyr)
## set directory for the column names, read the column names and activity names.
name_dir <- "/"
names <- read.csv(paste(getwd(), name_dir, "features.txt", sep=""), sep="", header=FALSE, col.names=c("Id", "Measurement"))
Act <- read.csv(paste(getwd(), name_dir, "activity_labels.txt", sep=""), sep="", header=FALSE, col.names=c("Id", "Activity"))
## set the directory for the test data, read in the test data, subject test data and activity test data.
## combine the columns for the test data set.
test_dir <- "/test/"
X_test <- read.csv(paste(getwd(), test_dir, "X_test.txt", sep=""), sep="", header=FALSE, col.names=names$Measurement)
subject_test <- read.csv(paste(getwd(), test_dir, "subject_test.txt", sep=""), sep="", header=FALSE, col.names="Subject")
Y_test <- read.csv(paste(getwd(), test_dir, "y_test.txt", sep=""), sep="", header=FALSE, col.names="Activity")
test_data <- cbind(subject_test, Y_test, X_test)
## set the directory for the train data, read in the train data, subject train data and activity train data.
## combine the columns for the train data set
train_dir <- "/train/"
X_train <- read.csv(paste(getwd(), train_dir, "X_train.txt", sep=""), sep="", header=FALSE, col.names=names$Measurement)
subject_train <- read.csv(paste(getwd(), train_dir, "subject_train.txt", sep=""), sep="", header=FALSE, col.names="Subject")
Y_train <- read.csv(paste(getwd(), train_dir, "y_train.txt", sep=""), sep="", header=FALSE, col.names="Activity")
train_data <- cbind(subject_train, Y_train, X_train)
#combine the test and trainings data set
data <- rbind(test_data, train_data)
## select the subject and set the column name
Subject <- data[,1]
names(Subject) <- "Subject"
## replace the activity number to a descriptive word
data_activity <- sqldf("SELECT Act.Activity as Activity FROM data INNER JOIN Act ON data.Activity= Act.Id")
## select the columns with the keyword mean and with the keyword std
data_mean <- select(data, contains("mean", ignore.case=TRUE))
data_std <- select(data, contains("std", ignore.case=TRUE))
## combine the columns and rename the subject column
new <- cbind(Subject, data_activity, data_mean, data_std)
## create the tidy data set
tidy <- ddply(new, .(Subject, Activity), numcolwise(mean))
View(tidy)
?write.table
write.table(tidy_data, file="tidy_data.txt", row.name=FALSE)
write.table(tidy, file="tidy_data.txt", row.name=FALSE)
names
names[,2]
select(data, contains("mean", ignore.case=TRUE))
names(select(data, contains("mean", ignore.case=TRUE)))
column_mean <- names(select(data, contains("mean", ignore.case=TRUE)))
column_std <- names(select(data, contains("std", ignore.case=TRUE)))
column_mean <- names(select(data, contains("mean", ignore.case=TRUE)))
column_std <- names(select(data, contains("std", ignore.case=TRUE)))
column_names <- cbind(column_mean, column_set)
column_mean <- names(select(data, contains("mean", ignore.case=TRUE)))
column_std <- names(select(data, contains("std", ignore.case=TRUE)))
column_names <- cbind(column_mean, column_std)
column_mean <- names(select(data, contains("mean", ignore.case=TRUE)))
column_std <- names(select(data, contains("std", ignore.case=TRUE)))
column_names <- rbind(column_mean, column_std)
column_mean
write.table(column_mean, file="cmean.txt", row.name=FALSE)
write.table(column_std, file="cstd.txt", row.name=FALSE)
View(names(data))
